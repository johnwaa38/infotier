import { Body, Controller, Post } from '@nestjs/common'; import fetch from 'node-fetch'; import { ApiTags } from '@nestjs/swagger'; @ApiTags('webhooks') @Controller('v1/simulate-webhook') export class WebhooksController { @Post() async send(@Body() body:any){ const { callback_url, payload={ping:'pong'} } = body||{}; if(!callback_url) return { error:'callback_url required' }; const res=await fetch(callback_url,{ method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify(payload)}); return { ok:res.ok, status:res.status } } }
